{% extends "base.html" %}

{% block content %}
<div class="user-greeting">
    <h2>–ü—Ä–∏–≤–µ—Ç, {{ user.name }}! üëã</h2>
    <p>–í–æ—Ç —Ç–≤–æ–π —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á</p>
</div>

<!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ -->
<div style="background: #f7fafc; padding: 25px; border-radius: 15px; margin-bottom: 30px;">
    <h3 style="margin-bottom: 20px; color: #2d3748;">‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É</h3>
    <form action="/task/add" method="post">
        <div class="form-group">
            <input type="text" name="title" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏" required>
        </div>
        <div class="form-group">
            <textarea name="description" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)" rows="3"></textarea>
        </div>
        <input type="hidden" name="user_id" value="{{ user.id }}">
        <button type="submit" class="btn">–î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É</button>
    </form>
</div>

<!-- –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á -->
<div>
    <h3 style="margin-bottom: 20px; color: #2d3748;">
        üìã –ú–æ–∏ –∑–∞–¥–∞—á–∏ 
        <span style="background: #667eea; color: white; padding: 5px 10px; border-radius: 20px; font-size: 0.8em;">
            {{ tasks|length }}
        </span>
    </h3>
    
    {% if tasks %}
        {% for task in tasks %}
        <div class="task">
            <h4>{{ task.title }}</h4>
            <p>{{ task.description or "–ù–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è" }}</p>
            <div class="task-actions">
                <form action="/task/delete/{{ task.id }}" method="post" style="display: inline;">
                    <button type="submit" class="btn btn-danger">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
                </form>
            </div>
        </div>
        {% endfor %}
    {% else %}
        <div class="alert">
            üéâ –û—Ç–ª–∏—á–Ω–æ! –£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–¥–∞—á. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—É—é –∑–∞–¥–∞—á—É –≤—ã—à–µ.
        </div>
    {% endif %}
</div>

<div class="logout">
    <a href="/logout" class="link">üö™ –í—ã–π—Ç–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã</a>
</div>
{% endblock %}